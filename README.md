# PueLinux
Linux LPIC1 LPIC2

# Pastanaga ü•ï

### LPIC1 - Nov 2023





#### UPM

   * Asistencia obligatoria m√≠nima del **80%** de horas del curso.
   * Pruebas de evaluaci√≥n intermedia y final. Hay que superarlas con una nota m√≠nima de 5 sobre 10
   * Finalizaci√≥n (Diplomas): 
       * Aprovechamiento (APTO/A) -> prueba final aprobada + 80% asistencia
       * Asistencia (NO APTO/A) -> 80% asistencia
#### PUE

   * El examen de **certificaci√≥n LPIC1-101** no est√° incluido en el curso, pero el PUE tiene la deferencia de proporcionarlo de forma gratuita si se cumple lo siguiente:
       * El alumno ha conseguido el diploma de aprovechamiento.
       * El alumno se ha unido al programa "**PUE Alumni**" ( [https://consorci.pue.es/pue-alumni](https://consorci.pue.es/pue-alumni) ) antes de la finalizaci√≥n del curso (tiene un coste de 60‚Ç¨ anuales). Dicho programa tiene otras ventajas, como descuentos a otras certificaciones (LPIC1-102). 
   * **PUE Alumni - BENEFICIS DEL PROGRAMA**
       * Ex√†mens de certificaci√≥ inclosos al preu del curs per a aquells cursos amb certificaci√≥ oficial associada, sempre que el curs es finalitzi amb aprofitament i que la subscripci√≥ PUE Alumni estigui vigent abans d'acabar l'acci√≥ formativa.
       * Descompte del 50% als ex√†mens de certificaci√≥ de Microsoft (excepte MTA, MOS i Fonamentals).
       * Descompte del 30% als ex√†mens de certificaci√≥ de LPI.
       * 50% de dte. en les despeses de gesti√≥ dels ex√†mens que reserveu a PUE. Novetat d'aquest nou any lectiu!
       * Promocions peri√≤diques i informaci√≥ sobre les novetats, tend√®ncies i esdeveniments del sector tecnol√≤gic.
#### **Dudas y consultas**

   * Para consultas sobre los cursos: [https://help.consorci.pue.es/](https://help.consorci.pue.es/)
   * Para incidencias de acceso aula virtual/entornos: [https://help.pue.es](https://help.pue.es)
   * Para consultas sobre certificaciones: [https://exam.pue.es/help/](https://exam.pue.es/help/)




## Log√≠stica

   * **Tenemos distintos materiales para el curso: **
       * Los de la Fundaci√≥n Linux, 
       * los de NetAcad (Cisco) 
       * y los que proporciona PUE.
   * Como el orden de los mismos es distinto, priorizaremos el que sigue el orden m√°s estricto para la certificaci√≥n, es decir el de la Fundaci√≥n Linux. Adem√°s, el de NetAcad es autoexplicativo con Labs incluidos, as√≠ que el material de NetAcad lo dejaremos para que lo hag√°is vosotros en casa y os sirva de repaso.
### Material del curso de la Linux Professional Institute (LPI)

   * [https://www.lpi.org/es/our-certifications/lpic-1-overview](https://www.lpi.org/es/our-certifications/lpic-1-overview) - LPIC-1
   * **010 - Essentials, sin certificaci√≥n, este contenido se da por sabido**
       * [https://www.lpi.org/es/our-certifications/linux-essentials-overview](https://www.lpi.org/es/our-certifications/linux-essentials-overview) - Temario 010
       * [https://learning.lpi.org/pdfstore/LPI-Learning-Material-010-160-es.pdf](https://learning.lpi.org/pdfstore/LPI-Learning-Material-010-160-es.pdf) - **PDF** de 447 p√°g
   * **101 - Primera parte del curso**
       * [https://learning.lpi.org/es/learning-materials/101-500/](https://learning.lpi.org/es/learning-materials/101-500/) - Temario 101
       * [https://www.lpi.org/es/our-certifications/exam-101-objectives](https://www.lpi.org/es/our-certifications/exam-101-objectives) - Objetivos del **Examen 101**
       * [https://learning.lpi.org/pdfstore/LPI-Learning-Material-101-500-es.pdf](https://learning.lpi.org/pdfstore/LPI-Learning-Material-101-500-es.pdf) - **PDF** de 571 p√°g
   * **102 - Segunda parte del curso**
       * [https://learning.lpi.org/es/learning-materials/102-500/](https://learning.lpi.org/es/learning-materials/102-500/) - Temario 102
       * [https://www.lpi.org/es/our-certifications/exam-102-objectives](https://www.lpi.org/es/our-certifications/exam-102-objectives) - Objetivos del **Examen 102**
       * [https://learning.lpi.org/pdfstore/LPI-Learning-Material-102-500-es.pdf](https://learning.lpi.org/pdfstore/LPI-Learning-Material-102-500-es.pdf) - **PDF** de 594 p√°g
### NetAcad

   * Tenemos disponible **hasta el 1 de diciembre**, acceso al material del curso, con laboratorios incluidos en la p√°gina de NetAcad (propiedad de CISCO):
       * [https://www.netacad.com/](https://www.netacad.com/)
   * El acceso al material es 24x7, pod√©is acceder en cualquier horario.
   * Para cambiar el teclado dentro de la terminal en los labs al espa√±ol, con el comando
       * **-->** **loadkeys es**
   * El password de root es: **netlab123**
### Entorno de Labs del PUE

   * [https://labs.pue.es/](https://labs.pue.es/) - Panel de control de las m√°quinas virtuales para los labs, a trav√©s de Guacamole.
       * **Passwords:**
           * pue** : cangetin**
           * root** : toor**
       * [https://help.pue.es](https://help.pue.es) - Soporte, en caso de problemas
   * **El horario de acceso a las m√°quinas es el mismo del curso**. Fuera del horario del curso no ten√©is acceso a las m√°quinas
   * **No actualic√©is las m√°quinas**, no es necesario, y adem√°s, como son versiones de hace unos a√±os, tardar√≠a demasiado y cambiar√≠a el entorno.
   * Las m√°quinas se paran solas 15 minutos despu√©s de acabar el curso. Se pueden encender desde 15 minutos antes de empezar el curso.
   * Las m√°quinas tardan un poquito en arrancar, (en estar disponibles). Lo que es importante es que vosotros apagu√©is de forma ordenadas las m√°quinas, por qu√© si no, si no responden al apagarlas, se les hace un destruir, con lo que pueden tardar luego en arrancar (tienen que chequear el FS).
### **M√°quinas para practicar (Debian 9.4 y CentOS 7)**

   * **Sin instalar nada, online**
       * [https://www.onworks.net/](https://www.onworks.net/) - El password de root es: **123456**
           * [https://www.onworks.net/component/content/article?id=65750:free-centos-workstation-online](https://www.onworks.net/component/content/article?id=65750:free-centos-workstation-online) - **CentOS**
           * [https://www.onworks.net/component/content/article?id=65734:free-debian-online](https://www.onworks.net/component/content/article?id=65734:free-debian-online) - **Debian**
       * [https://distrosea.com/](https://distrosea.com/) - Aqu√≠ tenemos las √∫ltimas versiones (CentOS 9 y Debian 12)
           * [https://distrosea.com/select/centosstream/](https://distrosea.com/select/centosstream/) - **CentOS**
           * [https://distrosea.com/select/debian/](https://distrosea.com/select/debian/) - **Debian**
   * **M√°quinas virtuales ya instaladas, solo descargar e importar en VirtualBOX (o VMware)**
       * [https://www.virtualbox.org/](https://www.virtualbox.org/) - **VirtualBox**, hypervisor open source gratuito para instalarlo en vuestro equipo y dentro importar las siguientes m√°quinas virtuales:
       * [https://www.osboxes.org/](https://www.osboxes.org/) - **OSBoxes**, repositorio con cientos de m√°quinas virtuales.
           * [https://www.osboxes.org/centos/](https://www.osboxes.org/centos/) - **CentOS** para **VirtualBox**
           * [https://www.osboxes.org/debian/](https://www.osboxes.org/debian/) - **Debian** para **VirtualBox**
           * **Credenciales por defecto:**
               * username: **osboxes**
               * password: **osboxes.org**
               * []root[] password: **osboxes.org**
   * **VPS gratis, pero hay que instalar el SSOO de forma manual**
       * [https://apuntesit.tk/tutoriales/como-obtener-2-vps-gratis-para-siempre/](https://apuntesit.tk/tutoriales/como-obtener-2-vps-gratis-para-siempre/) - Como tener dos VPS gratis de por vida en la cloud de Oracle
       * [https://aws.amazon.com/es/ec2/pricing/?loc=ft#Free\_tier]([]https://aws.amazon.com/es/ec2/pricing/?loc=ft#Free\_tier[]) - En Amazon AWS
   * **Instalarlo de forma nativa en Windows. Esta forma es la m√°s insegura si vamos a trastear, podemos romper Windows**
       * [https://ubuntu.com/tutorials/install-ubuntu-on-wsl2-on-windows-11-with-gui-support](https://ubuntu.com/tutorials/install-ubuntu-on-wsl2-on-windows-11-with-gui-support) - WSL2
### Comandos interesantes

   * Con el comando **script <fichero>** podemos grabar lo que pasa en la terminal. 
       * Cuando queramos parar la grabaci√≥n, tecleamos **exit**. 
       * Para ver la grabaci√≥n, lo podemos hacer con** less -r <fichero>**
   * **grep -n**  me muestra el numero de l√≠nea de lo que encuentra. 
       * **vim -c <num\_linea>** me lleva directamente a esa l√≠nea.
   * **file** me da informaci√≥n acerca del formato de un fichero
   * **bc** es la calculadora en l√≠nea de comandos
       * **scale=2** --> para trabajar con dos decimales, por defecto redondea siempre a n√∫meros enteros
       * **quit** --> para salir




## Tema Introductorio Inicial

   * Mundo UNIX, dos versiones:
       * **BSD** - FreeBSD
       * **System V** - Linux.  Dentro de System V, existen dos grandes ramas, m√°s una tercera basada en **LFS** (Linux From Scratch)
           * **Red Hat** - CentOS - Oracle - Alma Linux - Rocky Linux - Fedora
           * **Debian** - Ubuntu - Linux Mint - Kali Linux
           * [https://www.linuxfromscratch.org/](https://www.linuxfromscratch.org/) - **LFS**, para crear tu propia distribuci√≥n desde cero. Esto es ya muy PRO :P
               * **ArchLinux** y derivados entran en esta categor√≠a. Derivados m√°s o menos conocidos: **BlackArch**, **Manjaro**, **SteamOS**, **SystemRescue**.
           * [https://es.wikipedia.org/wiki/Anexo:Distribuciones\_GNU/Linux\_de\_Espa%C3%B1a](https://es.wikipedia.org/wiki/Anexo:Distribuciones\_GNU/Linux\_de\_Espa%C3%B1a) - Distribuciones Linux en Espa√±a
       * Al comando **ps** se le pueden pasar opciones en los tres formatos: BSD, System V, GNU. Ver la p√°gina del manual: **man ps**
   * [https://es.wikipedia.org/wiki/Unix](https://es.wikipedia.org/wiki/Unix) - UNIX nace oficialmente el 1 de enero de 1970
   * [https://es.wikipedia.org/wiki/Principio\_KISS](https://es.wikipedia.org/wiki/Principio\_KISS) - **Principio KISS** - Keep IT Simple Stupid. Mantener las cosas lo m√°s sencillo posible. En Unix, cada comando hace solo una cosa, pero lo hace muy bien.
   * [https://es.wikipedia.org/wiki/Bash](https://es.wikipedia.org/wiki/Bash) - **Bash**, shell por defecto que vamos a usar
       * [https://es.wikipedia.org/wiki/Categor%C3%ADa:Shell\_de\_Unix](https://es.wikipedia.org/wiki/Categor%C3%ADa:Shell\_de\_Unix) - Otras Shells de Unix
       * El Tabulador es mi amigo
       * Concatenaci√≥n de comandos simples para hacer tareas complejas
       * Cada proceso es totalmente independiente
   * **En UNIX todo es un fichero**
   * En UNIX se distingue entre may√∫sculas y min√∫sculas
   * [https://es.wikipedia.org/wiki/Filesystem\_Hierarchy\_Standard](https://es.wikipedia.org/wiki/Filesystem\_Hierarchy\_Standard) - FHS




## Materia del curso

### Para dominar Linux necesitamos controlar 4 temas importantes:

   * Ayuda del sistema - **Curso 010 - Tema 2.2**
   * Gesti√≥n del software - **Tema 102**
   * Gesti√≥n de procesos - **Tema 103.5**
   * Registros del sistema (logs) - **Tema 108.2**
### Otras materias b√°sicas:

   * SystemD - **Temas 101.3, 107.2 **(cron)** 108.2** (logs) **109.2** (red)
   * Diferencias entre tipos de comillas - **Tema 103.1**
   * globbing - **Tema 103.3**
   * Regex - **Tema 103.7**
   * vi - **Tema 103.8**
   * Permisos - **Tema 104.5**
   * Enlaces - **Tema 104.6**
   * scripting - **Tema 105.2**
   * sudo - **Tema 110.1**


### Ayuda

   * **man** -> Ayuda principal del sistema (MANual). Est√° dividida en p√°ginas tem√°ticas, siendo las m√°s importantes la 5, la 8 y la 1.
       * **man man** -> Ayuda sobre man.
       * **man 1** -> /bin/ comandos que puede ejecutar cualquier usuario (ej. man 1 ls)
       * **man 8** -> /sbin/ comandos de root (ej. man 8 fdisk)
       * **man 5** -> **ficheros de configuraci√≥n** (ej. man 5 fstab)
       * **man 7** -> ayuda gen√©rica (ej. man 7 units)
           * **-->** ls -1 /usr/share/man/man7 | cut -d"." -f1 | sort | xargs whatis 2>/dev/null | grep '(7)' #Ver todas las p√°ginas de ayuda de la secci√≥n 7
       * **man 2** -> llamadas al sistema
       * **man 3** -> funciones de lenguajes de programaci√≥n
       * **man 4** -> dispositivos (devices)
       * **man 6** -> juegos
   * **less** -> es el paginador por defecto, se usa dentro del **man**, en el **vi** (Tema 103.8), y en otros comandos. As√≠ que si aprendemos a utilizarlo, sabremos movernos dentro del man, del vi, etc..
       * **g** --> vamos al principio del documento.
       * **G** --> vamos al final.
       * **/texto** --> Busca **texto** dentro del documento, y me posiciona en esa l√≠nea.
           * **n** --> busca la siguiente vez que aparece **texto**, y me lleva a esa l√≠nea.
           * **N** --> busca la anterior vez que aparece **texto**, y me lleva a esa l√≠nea.
       * **h** --> Ayuda, listado de atajos de teclado
       * **q** --> Salimos
   * **mandb** -> genera una base de datos con la primera linea de todas las p√°ginas del Manual, la linea en la que se describe cada comando. Esa base de datos luego es usada por los dos comandos siguientes. En RHEL6 y anteriores el comando se llama makewhatis.
       * **whatis** -> busca palabras completas en la base de datos (ej. whatis ls). Es equivalente a **man -f**.
       * **apropos** -> busca cadenas en la base de datos (ej. apropos ls). Es equivalente a **man -k**.
   * **info** -> sistema de ayuda alternativo a man.
       * **info info** -> ayuda sobre info.
       * **pinfo** -> Una mejor alternativa a info (info coloreado, se ve todo mucho mejor)
       * **n** --> Siguiente p√°gina
       * **p** --> P√°gina previa
       * **u** --> Vuelve al nivel padre
       * Para ir a un link, nos posicionamos en el, y pulsamos **Enter**
       * **q** --> Salida
   * **- -help** -> resumen de opciones de un comando (ej. ls - -help).
   * **updatedb** -> genera una base de datos con todos los ficheros accesibles en ese momento del sistema. Almacena el camino completo, el path completo. Por defecto no indexa ficheros en medio removibles o remotos (NFS, SAMBA). Debe ser ejecutado como root. Existe una tarea automatizada para que se actualize todas las noches (con el Cron).
       * **locate** -> busca en la base de datos la cadena especificada, incluido el path (ej. locate 7/READ).
   * **find** -> busca en tiempo real ficheros. Muy configurable, tiene muchas opciones interesantes.
   * **/usr/share/doc** -> directorio con cientos de megabytes de documentaci√≥n en varios formatos.
       * **du -sh /usr/share/doc** --> Me muestra cuanto ocupa el directorio
   * **grep -R cadena /etc/*** -> buscar cadena en el contenido de todos los ficheros del directorio /etc
   * Adem√°s, hay paquetes espec√≠ficos de documentaci√≥n en algunos programas, que podemos encontrar con los siguientes comandos:
       * $ yum search manual
       * $ yum search documentation




### Leyenda

   * **103.1 - 4p - C1,2y4 - Trabajar desde la l√≠nea de comandos**
       * **103.1** - Secci√≥n de la documentaci√≥n de LPI
       * **4p** - 4 preguntas de examen en esta secci√≥n
       * **C1,2y4** - Cap√≠tulos 1, 2 y 4 del material de **NetAcad**
       * El resto es el t√≠tulo de esa secci√≥n






## Examen 101, primera parte del curso, 60 preguntas



### Tema 101 - 8p - Arquitectura del Sistema

   * **101.1 - 2p - C15 - Determinar y configurar los ajustes de hardware**
       * Comandos para inspeccionar los dispositivos detectados: **lspci** y **lsusb**.
       * Comandos para administrar m√≥dulos del n√∫cleo del sistema operativo: **lsmod** y **modprobe**.
       * Archivos especiales relacionados con los dispositivos, ya sean los archivos que se encuentran en el directorio /**dev**/ o en los pseudo-sistemas de archivos en /**proc**/ y /**sys**/.
       * [https://architecnologia.es/lpic-1-101-1-comprendiendo-sys-udev-y-dbus](https://architecnologia.es/lpic-1-101-1-comprendiendo-sys-udev-y-dbus)
   * **101.2 - 3p - C16 -** **Arranque del sistema**
       * **-->** man 7 bootparam
       * **-->** dmesg #Me permite ver todo lo que ha hecho el kernel durante el `proceso de arranque
       * **Targets (SystemD) **vs** Runlevels (Init)**
           * shutdown.target   - runlevel **0**: Halt
           * emergency.target  - Menos que el runlevel 1
           * rescue.target     - runlevel **1**: Single-User Mode
           * multi-user.target - runlevels **2** and **3**: Multi-User Mode
           * graphical.target  - runlevel **5**: Graphical Mode
           * reboot.target     - runlevel **6**: Reboot
   * **101.3 - 3p - C18 -** **Cambiar los niveles de ejecuci√≥n / objetivos de arranque y apagar o reiniciar el sistema**
       * **man 7 bootup**
       * Hacemos el **lab** 18 de NetAcad (solo viene el inicio en formato init de System V)
       * **SystemD**
           * [https://manuais.iessanclemente.net/index.php/Gesti%C3%B3n\_del\_Sistema\_con\_Systemd](https://manuais.iessanclemente.net/index.php/Gesti%C3%B3n\_del\_Sistema\_con\_Systemd) - Gesti√≥n del sistema con SystemD
           * [https://www.freedesktop.org/software/systemd/man/index.html](https://www.freedesktop.org/software/systemd/man/index.html) -  P√°ginas del manual de SystemD
           * [https://fedoraproject.org/wiki/Systemd/es](https://fedoraproject.org/wiki/Systemd/es) - SystemD
           * **Orden de preferencia de directorios**
               * **/usr/lib/systemd/system/<unit>** - Directorio original donde se instalan por defecto las units. No debemos tocar nada en este directorio, porque se machaca en cada actualizaci√≥n.
               * **/run/systemd/<unit>** - Si queremos cambiar algo del fichero de configuraci√≥n de forma temporal, lo copiamos a esta localizaci√≥n y lo editamos. Pero al estar en **/run** se pierde al rebotar. Si lo quiero hacer persistente, lo meto en **/etc**
               * **/etc/systemd/system/<unit>** -  Directorio con mayor preferencia, pero puede existir o no.  Copio aqu√≠ el fichero de configuraci√≥n de la unit, y de esta forma es persistente lo que yo cambie en el.
           * **Comandos**:
               * **alias servicios="systemctl --no-page --no-legend --plain -t service --state=running"**
               * **alias sockets='systemctl --no-page --no-legend --plain -t socket --state=running'**
               * **systemctl daemon-reload** - Comando para indicarle a **systemd** que hemos tocado un fichero de configuraci√≥n por nuestra cuenta y que relea y aplique todos los ficheros de configuraci√≥n.


### Tema 102 - 12p - Instalaci√≥n de Linux y gesti√≥n de paquetes

   * **102.1 - 2p - C19 - Dise√±o del esquema de particionado del disco duro duro**
       * [https://es.wikipedia.org/wiki/Filesystem\_Hierarchy\_Standard](https://es.wikipedia.org/wiki/Filesystem\_Hierarchy\_Standard) - Est√°ndar que especifica que contenido debe ir en cada directorio en los sistemas UNIX.
   * **102.2 - 2p - C17 - Instalar un gestor de arranque**
       * En la l√≠nea del **GRUB** que empieza por "**linux**" puedo poner algunas opciones extras:
           * **nomodeset** - para arrancar en modo gr√°fico a prueba de fallos gr√°ficos (entrar√≠a en modo VGA normal, sin usar tarjetas gr√°ficas)
           * **noacpi** - si tenemos problemas con el gestor de energ√≠a (se apaga la m√°quina durante el arranque), podemos desactivarlo. El sistema no podr√° entrar en modo de ahorro de energ√≠a, pero por lo menos arranca.
           * **init=/bin/bash** - en vez de lanzar el systemd como proceso 1, lanza el bash. Esto implica que entramos directamente en el bash como root SIN que te pida el password de root
       * **Lab 17** de **GRUB**
   * **102.3 - 1p - C25 - Gesti√≥n de librer√≠as compartidas**
       * **ldd** - comando para ver las librer√≠as compartidas usadas por un binario dado
   * **102.4 - 3p - C24 - Gesti√≥n de paquetes Debian**
       * Ver Chuleta\_apt.txt
       * **/etc/apt/sources-list** - fichero con los repositorios
           * **/etc/apt/sources.list.d** - Directorio con los repositorios
   * **102.5 - 3p - C24 - Gesti√≥n de paquetes RPM y YUM**
       * Hacemos el Lab24, 45 min
           * **dpkg -i /var/www/debs/amd64/xfsprogs\_4.9.0+nmu1ubuntu2\_amd64.deb**
       * Ver Chuleta\_rpm.txt
       * [https://paraisolinux.com/dkms-que-gran-invento/](https://paraisolinux.com/dkms-que-gran-invento/) - **dkms**, que gran invento
       * **epel, epel-release** - Repositorio de paquetes extras de Fedora para RHEL
       * **fasttrack** - Repositorio con paquetes actualizados m√°s frecuentemente
       * **/etc/yum.repos.d** - Directorio con los repositorios
       * **--scripts** - opci√≥n que a√±adimos al comando rpm para ver los scripts que ejecuta un rpm al instalarlo o desinstalarlo
       * **laboratorio "ls" (en Red Hat)**
           * ls
           * which ls
           * rm /bin/ls # Elimino el binario
           * ls # No funciona, lo he borrado
           * dir # Si no tengo el comando ls, puedo usar dir
           * rpm -qf /bin/ls
           * yum provides /bin/ls
           * rpm -V coreutils
           * yum reinstall coreutils / yum install coreutils
   * **102.6 - 1p - C26 - Linux como sistema virtualizado **
       * **Contenedores**. Se basan en cuatro componentes principales:
           * [https://www.ionos.es/digitalguide/servidores/know-how/que-es-lxc/](https://www.ionos.es/digitalguide/servidores/know-how/que-es-lxc/) - Qu√© es **LXC**
               * [https://www.linuxadictos.com/incus-el-fork-de-lxd-que-busca-ofrecer-un-proyecto-comunitario-real.html](https://www.linuxadictos.com/incus-el-fork-de-lxd-que-busca-ofrecer-un-proyecto-comunitario-real.html) - **Incus**. el fork de **LXC** tras su pol√©mica "absorci√≥n" por Canonical
           * **namespaces**
               * Nos permite separar nombres de recursos, al estar en distintos espacios de trabajo.
               * Por ejemplo, en dos Contenedores distintos podemos tener un proceso con el mismo PID, porque est√°n en espacios separados.
               * De esta forma no tenemos que preocuparnos de como llamemos a los recursos dentro de un contenedor, no hay posibilidad de colisi√≥n.
               * El kernel nos permite nombrar recursos como PIDs, usuarios, redes, etc..
               * [https://es.wikipedia.org/wiki/Espacio\_de\_nombres](https://es.wikipedia.org/wiki/Espacio\_de\_nombres)
           * **cgroups**
               * [https://elpuig.xeill.net/Members/vcarceler/articulos/introduccion-a-los-grupos-de-control-cgroups-de-linux](https://elpuig.xeill.net/Members/vcarceler/articulos/introduccion-a-los-grupos-de-control-cgroups-de-linux) - Introducci√≥n a los grupos de control (cgroups) de Linux
           * **SELinux / AppArmor (LSM - Linux Security Models)**
               * [https://es.wikipedia.org/wiki/SELinux](https://es.wikipedia.org/wiki/SELinux)
           * **Seccomp BPF**
               * El filtrado Seccomp ofrece un medio para limitar el n√∫mero de system calls que expone el kernel a un determinado proceso.
               * **Seccomp BPF** (SECure COMputing with filters) son filtros expresados como un programa BPF (Berkeley Packet Filter).
               * [https://web.archive.org/web/20201027130513/https://clibre.io/blog/por-secciones/hardening/item/405-computacion-segura-con-filtros-seccomp-bpf](https://web.archive.org/web/20201027130513/https://clibre.io/blog/por-secciones/hardening/item/405-computacion-segura-con-filtros-seccomp-bpf)




### Tema 103 - 26p - Comandos GNU y Unix

   * **103.1 - 4p - C1,2y4** **- Trabajar desde la l√≠nea de comandos**
       * **!!** - se refiere al comando anteriormente introducido en la l√≠nea de comandos
       * **ls -A** -  ver todos los ficheros y directorios ocultos, excepto el **.** y el **..**
       * Para ejecutar un comando y no ejecutar su alias asociado, le anteponemos el car√°cter "**\**":
           * **\ls**
       * **Valores especiales de algunos caracteres**
           * Las comillas **sencillas** quitan el valor especial de cualquier car√°cter
           * Las comillas **dobles** quitan el valor especial de todos los caracteres, EXCEPTO para  **$,** **`**, **\** y, en ciertos casos, **!**
           * La **\** quita el valor especial del siguiente car√°cter
       * **-->** comando=ls #Definimos el contenido de la variable **comando** a "ls"
       * **-->** echo "$comando" #Vemos el contenido de la variable **comando**
       * ls
       * 

       * **-->** echo '$comando' #Quitamos el significado especial del **$** que hay dentro
       * $comando
       * 

       * **-->** echo \$comando  #Quitamos el significado especial al siguiente car√°cter de la **\**, en este caso el **$**
       * $comando
       * 

       * **-->** echo `$comando` #Se desaconseja el uso de las comillas invertidas
       * mi\_fichero
       * 

       * **-->** echo $($comando) #Mejor esta forma para ejecutar lo que hay dentro
       * mi\_fichero
       * 

       * Comandos vistos: **pwd, uname, man, type, which, history, echo, env, export, unset**
       * üá¨üáß [https://cmdchallenge.com](https://cmdchallenge.com) - P√°gina con desaf√≠os para gente que empieza de cero
       * **bash** - atajos de teclado
           * **ALT+.** o **ESC+.** --> poner el ultimo par√°metro del comando anterior
           * **CNTRL+r** --> b√∫squeda inversa en la l√≠nea de comandos
           * **CNTRL+l** --> limpiar la pantalla (hacer un **clear**)
           * [https://esgeeks.com/atajos-de-teclado-linux-bash/](https://esgeeks.com/atajos-de-teclado-linux-bash/) - Muchos m√°s atajos
   * **103.2 - 2p - C3 - Procesar secuencias de texto usando filtros**
       * Comandos vistos: **cat, bzcat, xzcat, zcat, less, head, tail, wc, sort, uniq, od, nl, sed, tr, cut, paste, split, md5sum, sha256sum, sha512sum**
       * **xargs** - Para pasar argumentos a trav√©s de la tuber√≠a en el lugar que nos convenga
       * **xxd** - visor hexadecimal
   * **103.3 - 4p - C4,5,6y12 - Administraci√≥n b√°sica de archivos**
       * **? (signo de interrogaci√≥n) **: representa **una** sola aparici√≥n de un caracter cualquiera.
       * **[] (corchetes)** - representa cualquier aparici√≥n de los caracteres encerrados entre corchetes. **PERO SOLO UNO DE ELLOS. **
           * **[11131111114]** --> un **1** un **3** o un **4**.
           * **[0-299999]** --> un **0** un **1** un **2** o un **9**.
       * *** (asterisco)** - representa **cero**, **una** o **m√°s** ocurrencias de cualquier caracter.
   * **103.4 - 4p - C10 - Uso de secuencias de texto, tuber√≠as y redireccionamientos**
   * **103.5 - 4p - C11 - Crear, supervisar y matar procesos**
       * **-->** apt install x11-apps # Para instalar xeyes en Ubuntu / Debian
       * Comandos: **fg, bg, \&, ^Z, ^C, nohup, disown, kill, xkill, killall, pkill, pidof, pgrep, top, dd, ps, pstree**
       * **-->** grep -i ppid /proc/<PID del proceso>/status # Vemos el PPID del proceso
       * **-->** xwininfo # Me da informaci√≥n de la ventana en la que pinche
       * **-->** watch -n 0.5 -d ls # ejecutar ls cada 0,5 segundos
       * **Listado de se√±ales m√°s usadas**
           * **SIGHUP (1)** - Reload, relee el fichero de configuraci√≥n y aplica los cambios
           * **SIGINT (2)** - Equivale a CNTRL+C
           * **SIGKILL (9)** - Muerte incondicional
           * **SIGTERM (15) **- Muerte ordenada, termina lo que est√©s haciendo y muere
           * **SIGCONT (18)** - Continua un proceso parado
           * **SIGSTOP (19)** - Para el proceso
       * **top** me muestra informaci√≥n de consumo de recursos del sistema
           * [https://learn.microsoft.com/es-es/troubleshoot/developer/webapps/aspnetcore/practice-troubleshoot-linux/3-2-task-managers-top-htop](https://learn.microsoft.com/es-es/troubleshoot/developer/webapps/aspnetcore/practice-troubleshoot-linux/3-2-task-managers-top-htop) - Uso de **top** y **htop**
           * **e**: Cambia la visualizaci√≥n de la memoria entre porcentaje, kilobytes (KB) y megabytes (MB).
           * **k**: kill
           * **r**: renice
           * **-->** top -p $(pidof xeyes | tr " " ",") # Muestra top con los procesos de xeyes
           * **Consumo de CPU**, medido en porcentaje de uso de CPU:
               * **us** - procesos ejecut√°ndose en espacio de usuario
               * **sy** - procesos ejecut√°ndose en espacio del systema
               * **ni** - procesos con prioridad m√°s alta de la normal (nice)
               * **id** - iddle, sin hacer nada
               * **wa** - waiting, esperando por disco o red
               * **hi** - tiempo gastado en atender interrupciones de tipo hard
               * **si** - tiempo gastado en atender interrupciones de tipo soft
               * **st** - stolen, tiempo robado por el hypervisor
       * Otros tops: **htop, powertop, bashtop **(solo Ubuntu, en CentoS se llama **btop**)**, glance, nethogs**
       * Comandos: **screen, tmux**
   * **103.6 - 2p - C11 - Modificar la prioridad de ejecuci√≥n de los procesos**
       * Comandos: **nice, renice**
   * **103.7 - 3p - C8 - Realizar b√∫squedas en archivos de texto usando expresiones regulares**
       * **regex**: Expresiones Regulares
           * üá¨üáß [https://regexr.com/](https://regexr.com/) - Una p√°gina muy chula para comprobar una expresi√≥n regular en tiempo real.
           * üá¨üáß [https://regex101.com/](https://regex101.com/) - Otra
           * üá¨üáß [https://www.debuggex.com/](https://www.debuggex.com/) - Otra
   * **103.8 - 3p - C9 - Edici√≥n b√°sica de archivos - vi**
       * export EDITOR=/usr/bin/vi # para definir el vi como editor por defecto
       * **Para aprender vi:**
           * LANG=es\_ES.UTF8 vimtutor # Comando que te abre el vi en modo tutorial en espa√±ol
           * [https://openvim.com/tutorial.html](https://openvim.com/tutorial.html)
           * [https://vim-adventures.com/](https://vim-adventures.com/)
       * **Configuraciones interesantes**
           * **set list** # Muestra los caracteres no visibles
           * **set number (set nu)** # Numera las l√≠neas
       * Para modificar el comportamiento del vi de forma persistente, a√±adimos en el fichero** ~/.vimrc** los cambios que queramos hacer:
           * **sysntax on** - Activar detecci√≥n de sintaxis con colores (si instalamos el paquete vim-enhanced lo hace autom√°ticamente)
           * **set number** - mostrar n√∫mero de l√≠nea
           * **set mouse=a** - para que funcione el rat√≥n en modo texto
           * Para cambiar el tabulador por defecto (que son 8 caracteres), lo podemos hacer con lo siguiente:
               * **set tabstop=4** - Cambia el tama√±o a 4 espacios
               * **set shiftwidth=4** - 
               * **set expandtab** - Substituye el caracter de tabulador por espacios en blanco




### Tema 104 - 14p - Dispositivos, sistemas de archivos Linux y el est√°ndar de jerarqu√≠a de archivos

   * **104.1 - 2p - C20 - Creaci√≥n de particiones y sistemas de archivos**
       * partprobe # Para forzar al kernel a releer la tabla de particiones, **si no lo hago, se puede perder el contenido del disco**
       * Tipos de particiones usadas por Linux
           * 82 Linux swap / Solaris
           * 83 Linux
           * 8e Linux LVM
   * **104.2 - 2p - C22y23 - Mantener la integridad de los sistemas de archivos**
   * **104.3 - 3p - C21 - Controlar el montaje y desmontaje de los sistemas de archivos**
       * relatime # A medias entre atime y noatime: solo actualiza el atime una vez al d√≠a
       * lsof - Se ve en el Tema 110
   * **~~104.4 - 0p - C24 - Cuotas de disco (no entra en el examen)~~**
   * **104.5 - 3p - C13 - Administraci√≥n de los permisos y los propietarios de los archivos**
   * **104.6 - 2p - C14 - Crear y cambiar enlaces duros y simb√≥licos**
   * **104.7 - 2p - C7 - Encontrar archivos de sistema y ubicar archivos en el lugar correspondiente**
       * Ver tema de ayuda




## Examen 102, segunda parte del curso, 60 preguntas



### Tema 105 - 8p - Shells y scripts

   * **105.1  - 4p - C1 - Personalizar y usar el entorno de shell**
       * LANG=es\_ES.UTF-8 cal # Para ejecutar un comando en un idioma determinado
       * LANG=C # Si tenemos el idioma ingl√©s por defecto, las horas las pone en formato AM/PM, lo cual es horrible si queremos ordenarlo por horas. El truco es cambiar el idioma a C, que aunque sigue siendo ingl√©s, ahora si, las horas me las pone en formato 24 horas.
       * ps auxw | grep [b]ash  # Para no ver el comando en el resultado del grep 
       * **Distintos tipos de shells de inicio**
           * **Shell de inicio de sesi√≥n interactivo como user2**
               * **su - user2**
               * **sudo su - user2**
           * **Shell de inicio de sesi√≥n interactivo como root**
               * **su - root ; su -**
               * **sudo su - root ; sudo su - ; sudo -i**
           * **Shell interactivo de no inicio de sesi√≥n como root**
               * **su root ; su**
               * **sudo su root ; sudo su ; sudo -s**
           * **Shell interactivo de no inicio de sesi√≥n como user2**
               * **su user2**
               * **sudo su user2 ; sudo -u user2 -s**
       * **declare** es una funci√≥n interna del **bash**, que me permite declarar funciones, y que admite las siguientes opciones:
           * **-a** para definir arrays indexados (si est√° soportado)
           * **-A** para definir arrays asociados (si est√° soportado)
           * **-i** para definir variables num√©ricas que contienen enteros
           * **-l** para definir variables cuyo contenido est√° todo en min√∫sculas
           * **-r** para definir variables readonly (lo mismo que el comando **readonly**)
           * **-u** para definir variables cuyo contenido est√° todo en may√∫sculas
           * **-x** para exportar la variable a subshells (lo mismo que **export**)
       * **alias**
           * Cuando se usan comillas con variables de entorno, las comillas simples hacen que la expansi√≥n sea din√°mica.
               * **$ alias where?='echo $PWD'**
               * **$ where?**
               * **/home/user2**
               * **$ cd Music**
               * **$ where?**
               * **/home/user2/Music**
           * Sin embargo, con las comillas dobles la expansi√≥n se hace de forma est√°tica en el momento de asignar el alias, y ya no cambia.
               * **$ alias where?="echo $PWD"**
               * **$ where?**
               * **/home/user2**
               * **$ cd Music**
               * **$ where?**
               * **/home/user2**
       * **|| y \&\&**
           * **||** es el **OR** l√≥gico
           * **\&\&** es **AND** l√≥gico
           * (ls /root \&>/dev/null \&\& echo "tengo permisos de root" ) || echo "no tengo permisos de root" # si se ejecuta como root, dice que tiene permisos, y si se ejecuta como cualquier otro usuario, dice que no tiene permisos
   * **105.2 - 4p - C2 - Personalizar y escribir scripts sencillos**
       * renice 15 -p $$ # Truco para bajar la prioridad de un script, ejecut√°ndolo dentro del propio script
       * **Opciones de depuraci√≥n de bash**
           * set -x # muestra las lineas que va ejecutando
           * set -e # para al primer error
           * set -n # lee el script, pero no lo ejecutes, para buscar errores
           * trap 'read -u1' debug # A√±ade un read detr√°s de cada l√≠nea del script, para pausarlo y que tengas que darle a enter
               * [https://stackoverflow.com/questions/9080431/how-execute-bash-script-line-by-line](https://stackoverflow.com/questions/9080431/how-execute-bash-script-line-by-line)
       * [https://github.com/koalaman/shellcheck](https://github.com/koalaman/shellcheck) - Chequeador de scripts
       * **IFS**
           * **$IFS** es la variable que define el separador entre campos (*Internal Field Separator*). Por defecto su valor es: espacio en blanco, tabulador, salto de linea.
           * El problema surge, cuando tengo nombres de ficheros que contienen espacios en blanco, ya que dentro de un script lo gestiona mal. Para resolverlo, puedo redefinir el valor de **$IFS** dentro del script. Por ejemplo, para que solo contemple como separador el salto de l√≠nea, con: 
               * IFS=$'\n'
           * El valor por defecto es:
               * IFS=$' \t\n' # o tambi√©n puedo hacer: **unset IFS**
           * [https://www.baeldung.com/linux/ifs-shell-variable](https://www.baeldung.com/linux/ifs-shell-variable) - The Meaning of **IFS** in Bash Scripting




### Tema 106 - 4p - Interfaces de usuario y escritorios

   * **106.1 - 2p - C3 - Instalar y configurar X11**
       * **Sistema de ventanas X**
           * Es el responsable de las operaciones gr√°ficas b√°sicas como dibujar los iconos, los fondos y las ventanas en las que se ejecutan las aplicaciones.
           * Es el propio **servidor** **Xorg**
           * El servidor X ejecuta el driver de video real y proporciona una interfaz a trav√©s de la cual otros programas pueden ejecutar √≥rdenes de dibujo sin conocer qu√© hardware est√° us√°ndose
       * **Window Manager - Gestor de ventanas**
           * A√±ade elementos alrededor de las ventanas, de forma que el usuario pueda cambiar el tama√±o, cerrar, ocultar, mover, ‚Ä¶
           * Tambi√©n controla la barra de t√≠tulo, la ventana en el foco y comandos y rat√≥n que afectan a dicha ventana
           * [https://wiki.archlinux.org/title/Window\_manager\_(Espa%C3%B1ol%29](https://wiki.archlinux.org/title/Window\_manager\_(Espa%C3%B1ol%29) - Gestores de Ventanas
       * **Display Manager - Gestor de Pantalla / Administrador de pantalla**
           * Es una parte **opcional** del sistema X Window que se usa para el manejo de sesiones, ya que gestiona el registro de usuario (inicio y fin de sesi√≥n). 
           * Forma parte del cliente X.
       * **Entorno de escritorio**
           * El entorno de escritorio puede ser, desde un simple gestor de ventanas, hasta un conjunto muy completo de aplicaciones de escritorio. En realidad es lo que ‚Äúve‚Äù el usuario despu√©s de abrir la sesi√≥n.
           * En general, permiten la coordinaci√≥n entre aplicaciones y ofrecen un entorno uniforme de trabajo
           * Un entorno de escritorio consta, al menos de las siguientes aplicaciones clientes X:
               * Gestor de ventanas.
               * Administrador de Vistas.
               * Barra de tareas.
               * Gestor de archivos.
               * Conjunto de aplicaciones
           * [https://es.wikipedia.org/wiki/Entorno\_de\_escritorio](https://es.wikipedia.org/wiki/Entorno\_de\_escritorio) - Entornos de escritorio libres
           * **startx** - Una vez que entras en un sistema con el entorno de texto, y si el entorno gr√°fico est√° instalado pero no activo, lo puedo levantar con este comando
   * **106.2 - 1p - C4 - Escritorios gr√°ficos**
       * xdpyinfo # Muestra informaci√≥n sobre el servidor X en ejecuci√≥n
       * xprop # Para ver las propiedades de una ventana
       * yum provides *bin*system-config* # Buscar utilidades de configuraci√≥n gr√°fica
       * ssh -X 172.168.8.1 # Conectarme por ssh a otra m√°quina, definiendo la variable DISPLAY para poder reenviar la ventana gr√°fica de la aplicaci√≥n de una maquina a otra
       * krusader, mc --> gestores de archivos de doble panel (twin panel)
       * **zenity**
           * zenity --warning --title=Aviso --text="Pastanagas ü•ï al poder" - Para interactuar gr√°ficamente con un script
           * zenity --entry --title=Pregunta --text="Ponga aqu√≠ su contestaci√≥n"
           * zenity --display=:0
           * [https://howtoforge.es/como-mostrar-dialogos-gui-en-un-script-bash-usando-zenity/](https://howtoforge.es/como-mostrar-dialogos-gui-en-un-script-bash-usando-zenity/)
   * **106.3 - 1p - C5 - Accesibilidad**
       * **Teclas adhesivas/pegajosas (sticky keys)** - Cuando esta funci√≥n se activa, las combinaciones de teclas como Ctrl + C no necesitan ser presionadas al mismo tiempo. El usuario puede pulsar primero la tecla Ctrl , soltarla y luego pulsar la tecla C. Esto est√° pensado para usuarios con movilidad en solo una mano, o solo un dedo.
       * **Teclas de rebote (Bounce keys)** - Agrega un retardo entre pulsaciones, es decir, una nueva pulsaci√≥n de tecla ser√° aceptada s√≥lo despu√©s de que haya transcurrido un tiempo determinado desde la √∫ltima pulsaci√≥n de la misma. Esto est√° pensado para usuarios con temblores en las manos.
       * **Teclas lentas (slow keys)** - Requiere que el usuario mantenga pulsada la tecla durante un tiempo determinado antes de ser aceptada. Esto tambi√©n est√° pensado para usuarios con temblores en las manos, es posible que est√° activo a la vez que lo anterior.




### Tema 107 - 12p - Tareas administrativas

   * **107.1 - 5p - C6 - Administrar cuentas de usuario y de grupo y los archivos de sistema relacionados con ellas**
       * /etc/login.defs # Opciones por defecto al crear nuevos usuarios
       * /etc/adduser.conf # Opciones por defecto del comando useradd
       * vipw; vigr # Comandos que nos permiten editar el /etc/passwd y /etc/group, creando una copia de seguridad por defecto
       * userdel # La opci√≥n -r tambi√©n elimina el directorio principal del usuario y todos sus contenidos
       * [https://bytelearning.blogspot.com/2016/04/fichero-nsswitchconf-que-es-y-para-que.html](https://bytelearning.blogspot.com/2016/04/fichero-nsswitchconf-que-es-y-para-que.html) - /etc/nsswitch.conf
       * sssd # servicio que gestiona las credenciales contra un servidor remoto (AD, kerberos...)
       * find / -nouser # Para encontrar ficheros y directorios que no pertenecen a ning√∫n usuario
       * **Hashes**
           * [https://gchq.github.io/CyberChef/#recipe=MD5(%29](https://gchq.github.io/CyberChef/#recipe=MD5(%29) - CyberChef, herramienta para calcular distintos algoritmos
           * [https://crackstation.net/](https://crackstation.net/) - Busca passwords a partir de hashes almacenados en una Rainbow table
           * [https://freerainbowtables.com/](https://freerainbowtables.com/) - Para bajarte Rainbow Tables
       * **system-config-users** - Red Hat tiene una herramienta gr√°fica de gesti√≥n de usuarios, que no est√° instalada por defecto. Tenemos que instalarla nosotros.
   * **107.2 - 4p - C7 - Automatizar tareas administrativas del sistema mediante la programaci√≥n de trabajos**
       * [https://crontab.guru](https://crontab.guru) - Para probar el cron
       * **CUIDADO**, si especificamos tanto el d√≠a del mes, como el d√≠a de la semana, se ejecuta cuando cualquiera de los dos se cumple. En el PDF de la Fundaci√≥n Linux est√° mal. Ej: 
           * **0 9 13 * 2 echo "cuidado con la mala suerte"** # Esto se ejecuta todos los d√≠as 13 y todos los martes del a√±o, a las 9 en punto
           * **systemctl list-timers** # Para listar los "timers" de SystemD (el equivalente de cron)
           * [https://crontab.guru/cron-bug.html](https://crontab.guru/cron-bug.html) - El bug del cron con la especificaci√≥n del d√≠a de la semana Y el d√≠a del mes
   * **107.3 - 3p - C8 - Localizaci√≥n e internacionalizaci√≥n**
       * **localectl set-locale LANG=es\_US.UTF-8** - Para cambiar las variables locales, a trav√©s de SystemD
       * **locale** - Para ver las variables locales


### Tema 108 - 12p - Servicios esenciales del sistema

   * **108.1 - 3p - C9 - Mantener la hora del sistema**
       * rdate hora.roa.es ; LANG=C date # Ver la hora oficial de Espa√±a
       * **NTP - UDP puerto 123**
           * [https://www.incibe-cert.es/blog/ntp-sntp-y-ptp-sincronizacion-tiempo-necesito](https://www.incibe-cert.es/blog/ntp-sntp-y-ptp-sincronizacion-tiempo-necesito) - Comparativa entre SNTP, NTP y PTP.
           * [https://fedoramagazine.org/secure-ntp-with-nts/](https://fedoramagazine.org/secure-ntp-with-nts/) - NTS, un NTP m√°s seguro (en Red Hat 9 y derivados ya est√° soportado)
           * [https://github.com/jselvi/Delorean](https://github.com/jselvi/Delorean) - Delorean, un servidor NTP para pentesting
           * [https://www.pool.ntp.org](https://www.pool.ntp.org) - Servidores NTP accesibles en el mundo
               * [https://wiki.bandaancha.st/Lista\_de\_servidores\_NTP\_stratum\_1\_en\_Espa%C3%B1a](https://wiki.bandaancha.st/Lista\_de\_servidores\_NTP\_stratum\_1\_en\_Espa%C3%B1a) - Servidores NTP de estrato 1 en Espa√±a
           * [https://blog.guillen.io/2016/11/04/explicacion-de-la-salida-del-comando-ntpq/](https://blog.guillen.io/2016/11/04/explicacion-de-la-salida-del-comando-ntpq/) - Explicaci√≥n de la salida del comando **ntpq**
               * [https://doc.ntp.org/documentation/4.2.6-series/decode/#peer-status-word](https://doc.ntp.org/documentation/4.2.6-series/decode/#peer-status-word) - Explicaci√≥n del s√≠mbolo que hay antes de cada servidor
   * **108.2 - 4p - C10 - Registros del sistema**
       * **syslog**
           * **Emergency     0     System unusable messages **
           * **Alert         1     Immediate action required messages **
           * **Critical      2     Critical condition messages **
           * **Error         3     Error condition messages **
           * **Warning       4     Warning condition messages**
           * **Notification  5     Normal but significant messages **
           * **Information   6     Informational messages **
           * **Debugging     7     Debugging messages**
       * **syslogd**
           * En **Ubuntu**, est√° definido que logs van a que ficheros, en el fichero de configuraci√≥n:
               * **/etc/rsyslog.d/50-default.conf**
               * El fichero principal de logs en **Ubuntu** y derivados es: **/var/log/syslog**
           * En **Red Hat** la configuraci√≥n de los logs de **syslogd**, est√° en:
               * El fichero **/etc/rsyslog.conf** y en el directorio **/etc/rsyslog.d/*.conf**
               * El fichero principal de logs en **Red Hat** y derivados es: **/var/log/messages**
           * **logrotate** me permite gestionar cuanto tiempo almaceno los logs
           * **rsyslog-doc** # paquete extra que hay que instalar para poder tener documentaci√≥n en formmato html en /usr/share/doc/rsyslog*
       * **journalctl (systemd)**
           * [https://atareao.es/tutorial/trabajando-con-systemd/journalctl-y-logs-en-systemd/](https://atareao.es/tutorial/trabajando-con-systemd/journalctl-y-logs-en-systemd/) - Buen resumen
           * [https://www.solvetic.com/tutoriales/article/4051-administrar-logs-eventos-systemd-journalctl-linux/](https://www.solvetic.com/tutoriales/article/4051-administrar-logs-eventos-systemd-journalctl-linux/) - C√≥mo hacer persistentes los logs con journalctl
           * **Ejemplos de comandos:**
               * Mensajes generados por systemd (arranque del servicio, parada, etc...)
                   * **journalctl UNIT=etherpad.service**
               * Mensajes generados por el servicio (problemas al cargar algo, errores..)
                   * **journalctl \_SYSTEMD\_UNIT=etherpad.service**
               * Mensajes generados por el servicio y por systemd
                   * **journalctl -u etherpad.service**
               * Mensajes con prioridad entre emerg y err
                   * **journalctl -p emerg..err**
               * Mensajes ampliados
                   * **journalctl -p err -o verbose \_COMM=systemd**
               * Mensajes entre dos fechas indicadas
                   * **journalctl --since "2022-04-26 16:00:00" --until "2022-04-27 19:00:00" -p warning**
               * Ver las √∫ltimas 10 l√≠neas y dejarlo abierto (tailf)
                   * **journalctl -ef**
               * Almacenar solo los √∫ltimos 30 d√≠as en los logs
                   * **journalctl --vacuum-time=30d**
       * **Audit**
           * [https://www.solvetic.com/tutoriales/article/4343-como-auditar-linux-auditd-tool-ausearch/](https://www.solvetic.com/tutoriales/article/4343-como-auditar-linux-auditd-tool-ausearch/) - Sistema de auditorias en Linux **Audit**
           * üá¨üáß [https://www.thegeekdiary.com/how-to-audit-file-access-on-linux/](https://www.thegeekdiary.com/how-to-audit-file-access-on-linux/) - Como usar **Audit**
           * **ausearch -c ssh | tail -n 1** - Para ver el √∫ltimo evento sshd
       * Para mandar mensajes personalizados a los logs, lo podemos hacer con:
           * **-->** **logger -p mail.error "mensaje" **
   * **108.3 - 3p - C11 - Conceptos b√°sicos del Agente de Transferencia de Correo**
       * [https://programmerclick.com/article/27301611221/](https://programmerclick.com/article/27301611221/) - Explicaci√≥n sencilla de los **MTA**, **MDA** y **MUA**
       * **mail -s "Asunto" <vuestro-correo> <<<"Mensaje $(curl ifconfig.io)"**
   * **108.4 - 2p - C12 - Gesti√≥n de la impresi√≥n y de las impresoras**
       * **BSD**:
           * **lpr** to print, 
           * **lpq** to view pending jobs, 
           * **lprm** to cancel a job.
       * **System** **V**:
           * **lp** to print, 
           * **lpstat** to view pending jobs, 
           * **cancel** to cancel ongoing jobs.


### Tema 109 - 14p - Fundamentos de redes

   * **109.1 - 4p - C13 - Fundamentos de los protocolos de Internet**
       * **IPv4**
           * Clase A - 1-126 /8
           * Loopback internal - 127 /8 
           * Clase B - 128-191  /16
           * Clase C - 192-223   /24
           * Clase D - Multicast - 224-239
           * Clase E - experimental - 240-255
       * [https://www.iptp.net/es\_ES/iptp-tools/ip-calculator/](https://www.iptp.net/es\_ES/iptp-tools/ip-calculator/) - Calculadora de redes
       * [https://en.wikipedia.org/wiki/Regional\_Internet\_registry#/media/File:Regional\_Internet\_Registries\_world\_map.svg](https://en.wikipedia.org/wiki/Regional\_Internet\_registry#/media/File:Regional\_Internet\_Registries\_world\_map.svg) - Regiones de internet
       * **IPv6**
           * [https://www.google.es/ipv6/statistics.html#tab=ipv6-adoption](https://www.google.es/ipv6/statistics.html#tab=ipv6-adoption) - Estad√≠sticas de adopci√≥n
           * [https://es.wikipedia.org/wiki/IPv6](https://es.wikipedia.org/wiki/IPv6) - **IPv6**
           * [https://es.wikipedia.org/wiki/Neighbor\_Discovery](https://es.wikipedia.org/wiki/Neighbor\_Discovery) - **Neighbor Discovery** (ND) protocolo de IPv6, equivalente al protocolo Address Resolution Protocol (ARP) en IPv4. Est√° integrado en ICMPv6.
           * **Tipos de IPs**
               * **Unicast** - Identifica una **√∫nica** interfaz de red. Por defecto, los 64 bits de la izquierda identifican la red, y los 64 bits de la derecha identifican la interfaz.
               * **Multicast** - Identifica un **conjunto** de interfaces de red. Un paquete enviado a una direcci√≥n de multidifusi√≥n se enviar√° a todas las interfaces que pertenezcan a ese grupo. Aunque es similar, no debe confundirse con el **broadcast**, no existe en el protocolo IPv6.
                   * **[ff00::/8] - [ffff::/8]**
               * **Anycast** - Esto tambi√©n identifica un conjunto de interfaces en la red, pero el paquete reenviado a una direcci√≥n anycast ser√° entregado **s√≥lo a una direcci√≥n** de ese conjunto, no a todas.
               * **Link-Local - [fe80::/10] [febf::/10]**
                   * [https://openwebinars.net/blog/ipv6-autoconfiguracion-slaac/](https://openwebinars.net/blog/ipv6-autoconfiguracion-slaac/) - Autoconfiguraci√≥n con **SLAAC**
               * **Unique Local - [fc00::/7] [fdff::/7]**
                   * [https://es.wikipedia.org/wiki/Unique\_Local\_Address](https://es.wikipedia.org/wiki/Unique\_Local\_Address) - El equivalente a las redes locales de Clase C
               * **Localhost - [::1/128]**
               * **Red - [::/128]**
   * **109.2 - 4p - C14 - Configuraci√≥n de red persistente**
       * **NetworkManager** - servicio de **SystemD** para gestionar la red
           * **nmcli** # comando de NetworkManager en l√≠nea de comando para gestionarlo
           * **nmcli connection reload** # si hemos tocado alg√∫n fichero de redes, le decimos a NM que aplique los cambios
           * **systemctl daemon-reload** - Comando para indicarle a **systemd** que hemos tocado un fichero de configuraci√≥n por nuestra cuenta y que relea y aplique todos los ficheros de configuraci√≥n.
       * [https://bytelearning.blogspot.com/2016/04/fichero-nsswitchconf-que-es-y-para-que.html](https://bytelearning.blogspot.com/2016/04/fichero-nsswitchconf-que-es-y-para-que.html) - /etc/nsswitch.conf
       * [https://www.redhat.com/en/blog/rhel-9-networking-say-goodbye-ifcfg-files-and-hello-keyfiles](https://www.redhat.com/en/blog/rhel-9-networking-say-goodbye-ifcfg-files-and-hello-keyfiles) - Cambios de ficheros a partir de RHEL9
       * El fichero **/etc/services**, en Windows est√° localizado en:
           *  *C:\Windows\System32\drivers\etc\services*
       * [https://github.com/StevenBlack/hosts](https://github.com/StevenBlack/hosts) - Fichero **/etc/hosts** que al instalarlo en nuestra m√°quina, nos bloquea malware y anuncios
   * **109.3 - 4p - C15 - Resoluci√≥n de problemas b√°sicos de red**
       * [https://www.linuxparty.es/enviar-articulos/29-internet/7759-ifconfig-iwconfig-netstat-y-route-han-quedado-obsoletos-en-linux.html](https://www.linuxparty.es/enviar-articulos/29-internet/7759-ifconfig-iwconfig-netstat-y-route-han-quedado-obsoletos-en-linux.html) - ifconfig, iwconfig, netstat y route han quedado **obsoletos** en Linux, ¬°art√≠culo de 2012!
           * [https://www.linuxparty.es/enviar-articulos/29-internet/10787-ejemplos-de-comandos-ip-en-linux.html](https://www.linuxparty.es/enviar-articulos/29-internet/10787-ejemplos-de-comandos-ip-en-linux.html) - Ejemplos de uso de **ip **y** ss**
               * **netstat -tulpn  -->   ss -tulpn**
               * **netstat -neopa  -->   ss -neopa**
       * [https://www.howtouselinux.com/post/ping-icmp](https://www.howtouselinux.com/post/ping-icmp) - Entendiendo el **ping**
       * [https://winmtr.uptodown.com/windows](https://winmtr.uptodown.com/windows) - WinMTR, MTR para windows (Para windows est√° tambi√©n pathping)
           * mtr --aslookup # Para ver el AS por el que pasa (es lo mismo que -z)
       * **Crear una shell remota con netcat (nc)**
           * En la m√°quina que queremos que se ejecute la shell (en este caso le decimos que escuche solo en **localhost**, si queremos hacerlo desde otra m√°quina, cambiamos localhost por la IP de la m√°quina donde estamos ejecutando este comando)
               * **mkfifo pipe**
               * **nc -lv -s localhost -p 4444 <pipe | /bin/bash \&>pipe # escucho solo en localhost**
               * **nc -lv -p 4444 <pipe | /bin/bash \&>pipe # escucho en cualquier interfaz**
               * Cuando se termine la conexi√≥n borramos el fichero pipe: **rm pipe**
           * En la m√°quina remota ejecutamos lo siguiente, y a continuaci√≥n comandos de la shell. Si es otra m√°quina distinta, cambiamos localhost por la IP de la m√°quina remota.
               * **nc localhost 4444**
           * Es mucho m√°s c√≥modo con la opci√≥n -e, aunque es una opci√≥n m√°s moderna:
               * **nc -l -e /bin/bash 4444**
       * [https://github.com/raboof/nethogs](https://github.com/raboof/nethogs) - nethogs, un "top" para la red
   * **109.4 - 2p -  - Configuraci√≥n DNS en el lado del cliente**
       * **dig**
           * [https://juncotic.com/dig-opciones-interesantes-para-consultas-dns/](https://juncotic.com/dig-opciones-interesantes-para-consultas-dns/) - Resumen de dig
           * [https://www.hostinger.es/tutoriales/comando-dig-linux](https://www.hostinger.es/tutoriales/comando-dig-linux) - Ejemplos
       * [https://bytelearning.blogspot.com/2016/04/fichero-nsswitchconf-que-es-y-para-que.html](https://bytelearning.blogspot.com/2016/04/fichero-nsswitchconf-que-es-y-para-que.html) - /etc/nsswitch.conf
           * üá¨üáß [https://linuxsimply.com/getent-command-in-linux/](https://linuxsimply.com/getent-command-in-linux/) - Ejemplos de uso de **getent**, para  chequear el funcionamiento de nsswitch
       * wget / curl 




#### Programaci√≥n del viernes:

####     9:00 - 10:00 - Examen final

####     10:00 - 10:30 - cierre del curso con PUE

####     10:30 - 11:00 - descanso

####     11:00 - 12:00 - resoluci√≥n de dudas y si queda algo sin dar

####     12:00 - 14:00 - charla sobre resiliencia





### Tema 110 - 10p - Seguridad

   * **110.1 - 3p - C16 - Tareas de administraci√≥n de seguridad**
       * [https://rm-rf.es/linux-el-comando-lsof/](https://rm-rf.es/linux-el-comando-lsof/) - Resumen de **lsof**, un comando de linux muy potente
           * [https://www.commandlinefu.com/commands/matching/lsof/bHNvZg==/sort-by-votes](https://www.commandlinefu.com/commands/matching/lsof/bHNvZg==/sort-by-votes) - trucos con **lsof**
       * [https://www.linuxparty.es/35-linux/11459-aprenda-a-usar-el-comando-fuser-con-ejemplos-en-linux.html](https://www.linuxparty.es/35-linux/11459-aprenda-a-usar-el-comando-fuser-con-ejemplos-en-linux.html) - Resumen de **fuser**
       * **nmap**
           * [https://openwebinars.net/blog/nmap-uso-basico-para-rastreo-de-puertos/](https://openwebinars.net/blog/nmap-uso-basico-para-rastreo-de-puertos/) - Tutorial bastante extenso
           * [https://nmap.org/nsedoc/scripts/](https://nmap.org/nsedoc/scripts/) - Listado de **NSE Scripts**
       * **sudo**
           * üá¨üáß [https://www.maketecheasier.com/differences-between-su-sudo-su-sudo-s-sudo-i/](https://www.maketecheasier.com/differences-between-su-sudo-su-sudo-s-sudo-i/) - Diferencias entre **Su**, **Sudo** **Su**, **Sudo** **-s **y** Sudo -i**
           * [https://www.digitalocean.com/community/tutorials/how-to-edit-the-sudoers-file-es](https://www.digitalocean.com/community/tutorials/how-to-edit-the-sudoers-file-es) - C√≥mo editar el archivo **sudoers**
           * [https://www.linuxtotal.com.mx/index.php?cont=info\_admon\_014](https://www.linuxtotal.com.mx/index.php?cont=info\_admon\_014) - El fichero **/etc/sudoers**
       * **ulimit**
           * [https://sysarmy.com/blog/posts/entendiendo-la-fork-bomb-de-bash/](https://sysarmy.com/blog/posts/entendiendo-la-fork-bomb-de-bash/) - **fork bomb**
       * [https://docs.oracle.com/cd/E56339\_01/html/E53835/spconcepts-60676.html](https://docs.oracle.com/cd/E56339\_01/html/E53835/spconcepts-60676.html) - Recopilaci√≥n autom√°tica de datos de la actividad del sistema (**sar**)
   * **110.2 - 3p - C17 - Configuraci√≥n de la seguridad del sistema**
       * [https://web.archive.org/web/20210101015020/https://www.redeszone.net/tutoriales/seguridad/lynis-auditoria-seguridad-linux/](https://web.archive.org/web/20210101015020/https://www.redeszone.net/tutoriales/seguridad/lynis-auditoria-seguridad-linux/) - **Lynis**, herramienta para auditar la seguridad
       * [https://github.com/decalage2/awesome-security-hardening](https://github.com/decalage2/awesome-security-hardening) - Recopilaci√≥n de guias de seguridad
       * **PAM**
           * **Tipos de m√≥dulos**
               * **auth** (autenticaci√≥n): Autentica al usuario
               * **account** (verificaci√≥n): Comprueba si el usuario tiene permiso para utilizar el servicio o si el servicio esta permitido (control horario, por ejemplo).
               * **password** (actualizaci√≥n): Actualiza el mecanismo de autenticaci√≥n.
               * **session** (sesi√≥n): Acciones que deben ejecutarse antes y/o despu√©s del acceso del usuario.
           * **Control** 
               * **sufficient**: Se enviar√° correcto si no existe fallo previo. Si da ok, no mira m√°s.
               * **requisite**: Se env√≠a fallo sin ejecutar otros m√≥dulos. Si falla, da igual el resto.
               * **required**: Para tener el ok, todos los **required** tienen que dar su ok
               * **optional**: Su respuesta solo se usa si no existe otro m√≥dulo de este servicio y tipo.
               * **include**: Incluye todas las l√≠neas del **mismo tipo de m√≥dulo** encontradas en un fichero de configuraci√≥n adicional, cuyo nombre se especifica como argumento. En cuanto un m√≥dulo falle, no sigue mirando el resto, funciona como un **requisite**.
               * **substack**: Similar a **include**, excepto que la evaluaci√≥n de las acciones no hacen que PAM se salte el resto de los m√≥dulos, substack se trata como un √∫nico m√≥dulo. Funciona como un **required**, si falla, sigue comprobando todo, hasta que devuelve el no ok, para no dar pistas donde ha fallado. El **include**, si falla, sale en el momento.
           * [https://eltallerdelbit.com/configurar-pam-registrar-actividad-usuarios-terminal/](https://eltallerdelbit.com/configurar-pam-registrar-actividad-usuarios-terminal/) -  m√≥dulo PAM que literalmente es un keylogger, almacena todo lo que van tecleando los usuarios.
       * **TCPWrappers**
           * zenity --display=:0
   * **110.3 - 4p - C18 - Protecci√≥n de datos mediante cifrado**
       * **SSH**
           * ssh-keygen -b 4096 -t rsa -a 100  
           * PubkeyAuthentication yes
           * ssh -i id\_rsa\_kvm\_lpic fernando@192.168.124.1 
           * apt install ssh-askpass-gnome
           * ssh-keygen -lv -f /etc/ssh/ssh\_host\_ed25519\_key.pub # como invocar el random-art
           * [https://github.com/jtesta/ssh-audit](https://github.com/jtesta/ssh-audit) - Script para auditar los algoritmos que usa SSH, y la seguridad que da cada uno de ellos, con el objetivo de deshabilitar los m√°s inseguros.
           * tuneles ssh, VPN poor man
       * **GPG**


$debian\_chroot - variable por defecto vac√≠a, que indica si estoy bajo chroot





### Certificaci√≥n LPIC

   * La certificaci√≥n **LPIC-1** consta de 2 examenes de 90 minutos, con 60 preguntas cada uno.
       * Examen 101
       * Examen 102
   * De igual forma, la certificaci√≥n **LPIC-2 **consta de 2 examenes de 90 minutos, con 60 preguntas cada uno.
       * Examen 201
       * Examen 202
   * Hay preguntas de distintos tipos:
       * De elecci√≥n de una √∫nica respuesta
       * De elecci√≥n entre 2 y 3 respuestas correctas
       * De teclear un fichero de configuraci√≥n o directorio, con el path completo
       * De especificar un comando o un par√°metro de un comando
   * **Passing score:** 500/800 (62.5%)
   * **Su validez es de 5 a√±os**. Cada vez que apruebas una nueva certificaci√≥n, se resetea el contador
   * LPIC-1 est√° en espa√±ol, en cualquier momento podemos ver la pregunta original en ingl√©s.
       * LPIC-2 est√° en ingl√©s
   * **Ex√°menes de prueba**
       * [https://www.daypo.com/buscar.php?t=lpic](https://www.daypo.com/buscar.php?t=lpic) - **Ex√°menes de prueba gratuitos**
       * [https://examposter.com/lpi/](https://examposter.com/lpi/) - m√°s preguntas, aunque puede que sean antiguas
       * [https://www.examtopics.com/exams/lpi/101-500/view/](https://www.examtopics.com/exams/lpi/101-500/view/) - De pago, en ingl√©s
       * [https://www.examcollection.com/search.html?q=LPIC\&sa=](https://www.examcollection.com/search.html?q=LPIC\&sa=) - De pago, en ingl√©s
   * **LPIC-2**
       * LPIC-2 est√° en ingl√©s
       * [https://www.daypo.com/lpic201.html](https://www.daypo.com/lpic201.html) - Preguntas del examen **201**, dos tercios de las preguntas que me salieron est√°n aqu√≠.  Un tercio de las preguntas eran "nuevas"
       * [https://www.daypo.com/buscar.php?t=202-450](https://www.daypo.com/buscar.php?t=202-450) - Preguntas del examen **202**.




### Variados

   * Convertir pptx a pdf, desde Linux con LibreOffice instalado. Ejecutar en el directorio con todos los pptx a convertir:
       * **libreoffice --headless --invisible --convert-to pdf *.pptx**
   * **Unicode**
       * Para poder poner caracteres unicode en bash, tenemos que hacer lo siguiente:
           * 1.- Pulsar CNTRL+SHIFT+u
           * 2.- Dejamos de pulsarlo
           * 3.- Metemos el c√≥digo del car√°cter unicode
           * 4.- Pulsamos Enter
       * Caracteres Unicode
           * 007c - | (tuber√≠a o pipe)
           * 007e - ~ (vigudilla o tilde)
           * 1F493 - üíì (coraz√≥n)
           * 1F955 - ü•ï (Zanahoria)
       * [https://unicodeplus.com/](https://unicodeplus.com/) - Para buscar caracteres unicode
   * [https://www.brendangregg.com/linuxperf.html](https://www.brendangregg.com/linuxperf.html) - Brendan Gregg, el mega experto en Linux de Netflix
   * [https://codeshare.io/](https://codeshare.io/) - P√°gina para compartir texto en claro
   * [https://www.howtoforge.com/](https://www.howtoforge.com/) - Cientos de tutoriales para Linux




### Resiliencia

   * [https://access.redhat.com/documentation/es-es/red\_hat\_enterprise\_linux/8/html/monitoring\_and\_managing\_system\_status\_and\_performance/managing-power-consumption-with-powertop\_monitoring-and-managing-system-status-and-performance](https://access.redhat.com/documentation/es-es/red\_hat\_enterprise\_linux/8/html/monitoring\_and\_managing\_system\_status\_and\_performance/managing-power-consumption-with-powertop\_monitoring-and-managing-system-status-and-performance) - **PowerTop** - para medir el consumo el√©ctrico de los distintos componentes del ordenador
   * [https://www.nationalgeographic.com.es/naturaleza/2022-ya-ha-entrado-numeros-rojos-materia-sostenibilidad\_18629](https://www.nationalgeographic.com.es/naturaleza/2022-ya-ha-entrado-numeros-rojos-materia-sostenibilidad\_18629) - Consumo de recursos anuales
   * [https://www.bbc.com/mundo/noticias-58954923](https://www.bbc.com/mundo/noticias-58954923) - Medio ambiente: cu√°les son los 9 l√≠mites que mantienen a la Tierra en equilibrio (y qu√© riesgos corremos por haber pasado 4)
       * [https://www.stockholmresilience.org/research/planetary-boundaries.html](https://www.stockholmresilience.org/research/planetary-boundaries.html) - Centro de Resiliencia de Estocolmo
   * [https://www.xataka.com/magnet/paises-que-contaminan-mundo-ilustrados-detallado-grafico](https://www.xataka.com/magnet/paises-que-contaminan-mundo-ilustrados-detallado-grafico) - Emisi√≥n de carbono por pa√≠s
   * [https://www.un.org/sustainabledevelopment/es/2023/08/what-is-sustainable-development/](https://www.un.org/sustainabledevelopment/es/2023/08/what-is-sustainable-development/) - Los 17 objetivos de la agenda 2030 para el desarrollo sostenible


